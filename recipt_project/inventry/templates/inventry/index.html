{% extends "inventry/layout.html" %}

{% block body %}
<div>
    <div id="index_outer_div" class="receipt-details">
        <div>
            <ol>
                <br>

                {% if products %}
                <h3 style="margin-top: 8px;">Product Code</h3>
                {% for product in products %}
                <li style="margin-left: 15px;">{{ product.0 }}</li>
                <br>
                {% endfor %}
                {% else %}
                <h1>No items added</h1>
                {% endif %}
            </ol>
        </div>

        <div class="receipt-section">
            <br>
            {% if products %}
            <h3>Product description</h3>
            {% for product in products %}
            {{ product.1 }}
            <br><br>
            {% endfor %}
            {% endif %}
        </div>

        <div class="receipt-section">
            <br>
            {% if products %}
            <h3>Quantity</h3>
            {% for product in products %}
            {{ product.2 }}
            <br><br>
            {% endfor %}
            {% endif %}
        </div>

        <div class="receipt-section">
            <br>
            {% if products %}
            <h3>Price</h3>
            {% for product in products %}
            {{ product.3 }}
            <br><br>
            {% endfor %}
            {% endif %}
        </div>
        <div class="receipt-section">
            <br>
            {% if products %}
            <h3>Total for Each Item</h3>
            {% for product in products %}
            {{ product.4 }}
            <br><br>
            {% endfor %}
            {% endif %}
        </div>
        <div class="receipt-section">
            <br>
            {% if products %}
            <h3>Date time</h3>
            {% for product in products %}
            {{ product.5 }}
            <br><br>
            {% endfor %}
            {% endif %}
        </div>
        <div class="receipt-section">
            <br>
            {% if products %}
            <h3>Added / Updated by</h3>
            {% for product in products %}
            {{ product.6 }}
            <br><br>
            {% endfor %}
            {% endif %}
        </div>
        <div class="receipt-actions">
            <br><br>
            {% for product in products %}
            <a href="{% url 'inventry:dele' forloop.counter0 product.0 %}" class="delete-button"></a>
                <img src="https://icon-library.com/images/icon-remove/icon-remove-18.jpg" alt="DEL"
                    style="width: 15px; height: 20px; margin-bottom: 10px; margin-right: 10px;">
            </a>
            <a href="{% url 'inventry:edit_product' forloop.counter0 product.0 %}" class="edit-button">
                <img src="https://th.bing.com/th/id/OIP.P6trHImFdjGgSXQBU7_sagHaHa?rs=1&pid=ImgDetMain" alt="EDIT"
                    style="width: 15px; height: 20px; margin-bottom: 10px; margin-right: 10px;">
            </a>
            <br>
            {% endfor %}
        </div>
    </div>
</div>

<div class="actions">
    <a href="{% url 'inventry:add' %}" class="action-button">Add New Item</a>
    <button onclick="printReceipt()" class="action-button print-button">Print Receipt</button>
</div>

<script>
    function printReceipt() {
        // Hide edit and delete buttons for printing
        document.querySelectorAll('.delete-button').forEach(el => el.style.display = 'none');
        document.querySelectorAll('.edit-button').forEach(el => el.style.display = 'none');

        // Print the page
        window.print();

        // Restore the visibility of the hidden elements
        document.querySelectorAll('.delete-button').forEach(el => el.style.display = 'inline');
        document.querySelectorAll('.edit-button').forEach(el => el.style.display = 'inline');
    }
</script>
</div>
{% endblock %}